<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>KiteSpotter - Find Your Perfect Kitesurfing Spot</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Bangers&family=Kalam:wght@400;700&family=Permanent+Marker&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
    
    <!-- Auto refresh helper script -->
    <script>
      // Fallback polling mechanism for hot reload
      if (window.location.hostname.includes('replit.dev')) {
        const REFRESH_INTERVAL = 2000; // 2 seconds
        let lastModified = Date.now();
        
        // Poll for changes
        setInterval(async () => {
          try {
            // Fetch the main.tsx file to check if it's changed
            const response = await fetch('/src/main.tsx?check=' + Date.now());
            const serverLastModified = response.headers.get('last-modified');
            const date = serverLastModified ? new Date(serverLastModified).getTime() : Date.now();
            
            // If the file has been modified, reload the page
            if (date > lastModified + 1000) { // Add 1 second buffer
              console.log('Change detected, reloading page...');
              lastModified = date;
              window.location.reload();
            }
          } catch (e) {
            console.error('Error checking for updates:', e);
          }
        }, REFRESH_INTERVAL);
      }
    </script>
  </body>
</html>
